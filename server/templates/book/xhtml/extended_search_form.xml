<script type="text/javascript" src="{{MEDIA_URL}}/js/views/jQuery.js"></script>
<script type="text/javascript" src="{{MEDIA_URL}}/js/views/jquery-autocomplete/jquery.autocomplete.js"></script>
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}/css/jquery.autocomplete.css" />
<div id="header">

    <h2>Extended search: </h2>
    <form name="extended_search" action="search">
    
        <table>    
            <tr><td>Title:</td>
            <td>  <input type="text" style="width: 253px;" name="title" id="id_title" value="{{ title.tit }}">
            <script type="text/javascript">function author_value() { return $('#id_author').val(); }
            $('#id_title').autocomplete("/extended_search/autocomplete_title", {
                "extraParams": {
                    "author": author_value
                }
            });</script></td>
            <td><input type="submit" value="Search" ></td>
            <td>&nbsp;&nbsp;<a href="simple_search" rel="simple search">Simple search</a></td>
            </tr><tr>
            <td>Author:</td> 
            <td> <input type="text" style="width: 253px;" name="author" value="{{ title.author }}" id="id_author"></td>
            <script type="text/javascript">function title_value() { return $('#id_title').val(); }
            $('#id_author').autocomplete("/extended_search/autocomplete_author", {
                "extraParams": {
                    "title": title_value
                }
            });</script>

            </tr><tr>
            <td style="padding-top: 20px;">Language:</td>  
            <td style="padding-top: 20px;"><select name="lang"  width="260" style="width: 260px">
                <option value="">--None--</option>
                {% ifequal "en" title.lang %}
                    <option selected value="en">English</option>
                    <option value="ru">Russian</option>
                    <option value="fr">French</option>
                    <option disabled>-----------</option> 
                    {% for lang in langs %}
                        <option value="{{lang.0}}">{{lang.1}}</option>
                    {% endfor %}
                {% else %}
                    {% ifequal "ru" title.lang %}
                        <option value="en">English</option>
                        <option selected value="ru">Russian</option>
                        <option value="fr">French</option>
                        <option disabled>-----------</option> 
                        {% for lang in langs %}
                            <option value="{{lang.0}}">{{lang.1}}</option>
                        {% endfor %}
                    {% else %}
                        {% ifequal "fr" title.lang %}
                            <option value="en">English</option>
                            <option value="ru">Russian</option>
                            <option selected value="fr">French</option>
                            <option disabled>-----------</option> 
                            {% for lang in langs %}
                                <option value="{{lang.0}}">{{lang.1}}</option>
                            {% endfor %}
                        {% else %}
                            <option value="en">English</option>
                            <option value="ru">Russian</option>
                            <option value="fr">French</option>
                            <option disabled>-----------</option>
                            {% for lang in langs %}
                                {% ifequal lang.0 title.lang %} 
                                    <option selected value="{{lang.0}}">{{lang.1}}</option>                    
                                {% else %}
                                <option value="{{lang.0}}">{{lang.1}}</option>
                                {% endifequal %}
                            {% endfor %}                            
                        {% endifequal %}
                    {% endifequal %}
                {% endifequal %}
                </select>
            </td>

            </tr><tr>
            <td>Tag:</td>
            <td><select name="tag"  width="260" style="width: 260px">
                <option value="">--None--</option>
                {% for tag in tags %}
                    {% ifequal tag.name title.tag %} 
                        <option selected value="{{tag.name}}">{{tag.name}}</option>
                    {% else %}
                        <option value="{{tag.name}}">{{tag.name}}</option>
                    {% endifequal %}
                {% endfor %}
                </select>
            </td>
             </tr>
        </table>
    </form>

</div>

